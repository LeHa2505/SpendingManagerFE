<h3 nz-typography style="text-align: center; font-size: 24px">
  <strong>THÔNG TIN THU CHI</strong>
</h3>

<div>
  <app-button-add
    [btnName]="'Tạo giao dịch mới'"
    [iconBtn]="'plus-circle'"
    style="font-size: 1rem"
    (click)="showModal()"
  ></app-button-add>
</div>

<!--Filter box-->

<div nz-row class="filter-block">
  <div nz-col [nzSpan]="8">
    <nz-input-group [nzSuffix]="suffixIconSearch">
      <input
        type="text"
        nz-input
        placeholder="Tìm kiếm"
        [(ngModel)]="searchValue"
      />
    </nz-input-group>
    <ng-template #suffixIconSearch>
      <span nz-icon nzType="search"></span>
    </ng-template>
    <br />
  </div>
  <div
    class="filter-item"
    nz-col
    [nzSpan]="4"
    style="display: flex; justify-content: center; align-items: center"
  >
    <nz-select
      nzShowSearch
      nzAllowClear
      nzPlaceHolder=""
      [(ngModel)]="inOutcomeSelect"
      (ngModelChange)="onChangeInOutcome($event)"
    >
      <nz-option nzLabel="Thu" nzValue="income">Thu</nz-option>
      <nz-option nzLabel="Chi" nzValue="outcome">Chi</nz-option>
    </nz-select>
  </div>
  <div
    nz-col
    [nzSpan]="12"
    style="display: flex; justify-content: space-evenly; align-items: center"
  >
    <span style="margin-right: 1rem; font-weight: bold">Thời gian:</span>
    <nz-range-picker
      style="min-width: 27rem; margin: 0"
      [(ngModel)]="date"
      (ngModelChange)="onChange($event)"
    ></nz-range-picker>
    <br />
  </div>
</div>

<!--Alert-->
<div *ngIf="compareLimit()">
  <nz-alert
    nzType="warning"
    nzMessage="Thông báo"
    nzCloseable
    nzDescription="Số tiền chi tiêu của bạn đã vượt quá hạn mức!"
    nzShowIcon
  ></nz-alert>
</div>

<!--Table-->
<div>
  <nz-table #basicTable [nzData]="listOfData">
    <thead>
      <tr class="head-style">
        <th>Loại giao dịch</th>
        <th>Số tiền</th>
        <th>Thời gian giao dịch</th>
        <th>Ghi chú</th>
        <th>Sửa</th>
        <th>Xóa</th>
      </tr>
    </thead>
    <tbody style="text-align: center">
      <tr
        *ngFor="
          let data of basicTable.data | customerEmailFilter : searchValue;
          let i = index
        "
      >
        <td
          class="catalogue-name"
          style="border-radius: 1.5rem 0rem 0rem 1.5rem; padding: 0.5rem 2rem"
        >
          <app-icon-image
            [iconImg]="data.icon"
            style="margin-right: 2rem; margin-left: 3rem"
          ></app-icon-image>
          <span>{{ data.type }}</span>
        </td>
        <td style="color: #fd3c4a; font-weight: bold">
          {{ data.amount.toString() }} đ
        </td>
        <td>{{ data.time }}</td>
        <td>{{ data.note }}</td>
        <td style="text-align: center; font-size: 1.2rem">
          <span
            (click)="showModalEdit(data)"
            style="cursor: pointer"
            nz-icon
            nzType="edit"
            nzTheme="fill"
          ></span>
        </td>
        <td
          style="
            border-radius: 0rem 1.5rem 1.5rem 0rem;
            text-align: center;
            font-size: 1.2rem;
          "
        >
          <span
            (click)="showDeleteConfirm(data)"
            style="cursor: pointer"
            nz-icon
            nzType="delete"
            nzTheme="fill"
          ></span>
        </td>
      </tr>
    </tbody>
  </nz-table>
</div>

<!--Modal-->
<nz-modal
  [(nzVisible)]="isVisible"
  [nzTitle]="addTitle"
  (nzOnCancel)="handleCancel()"
  (nzOnOk)="handleOk()"
  nzOkText="{{comfirmText}}"
>
  <ng-template #addTitle style="text-align: center"
    >Tạo giao dịch mới</ng-template
  >
  <div *nzModalContent>
    <div>
      <label for="transaction-name">Tên giao dịch</label> <br />
      <input
        nz-input
        style="margin-bottom: 1rem"
        placeholder=""
        [(ngModel)]="transactionName"
        id="transaction-name"
      />
      <br />
    </div>

    <div>
      <label for="transaction-name">Số tiền</label> <br />
      <div nz-row class="select-box">
        <div nz-col [nzSpan]="20">
          <input
            nz-input
            placeholder=""
            [(ngModel)]="transactionName"
            id="transaction-name"
          />
          <br />
        </div>
        <div nz-col [nzSpan]="4">
          <div
            class=""
            nz-col
            [nzSpan]="4"
            style="
              display: flex;
              justify-content: center;
              align-items: center;
              max-width: 100%;
              padding-left: 1rem;
            "
          >
            <nz-select
              nzPlaceHolder=""
              [(ngModel)]="inOutcomeSelect"
              style="width: 100%"
            >
              <nz-option nzLabel="Thu" nzValue="income">Thu</nz-option>
              <nz-option nzLabel="Chi" nzValue="outcome">Chi</nz-option>
            </nz-select>
          </div>
        </div>
      </div>
    </div>
    <div>
      <label for="transaction-type">Loại giao dịch</label> <br />
      <input
        nz-input
        style="margin-bottom: 1rem"
        placeholder=""
        [(ngModel)]="transactionType"
        id="transaction-type"
      />
      <br />
    </div>
    <div>
      <label for="transaction-note">Ghi chú</label> <br />
      <input
        nz-input
        style="margin-bottom: 1rem"
        placeholder=""
        [(ngModel)]="transactionNote"
        id="transaction-note"
      />
      <br />
    </div>
  </div>
</nz-modal>
